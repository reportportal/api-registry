---
stoplight-id: dp15zhxks2i84
---

@startuml organizational-entities

'skinparam linetype ortho

package OrganizationView {
  entity OrganizationProfile {
    related OrganizationRelation
  }
  
  entity OrganizationInfo
  OrganizationInfo -up- OrganizationProfile
  
  entity OrganizationDetails {
    name String
    slug String
  }
  OrganizationInfo *-- OrganizationDetails

  entity OrganizationMetadata {
    id Int
    type OrganizationType
    external_id String
    created_at DateTime
    updated_at DateTime
  }
  OrganizationInfo *-- OrganizationMetadata

  entity OrganizationRelation {
    projects OrgProjectsRelation
    users OrgUsersRelation
    launches OrgLaunchesRelation
    billing OrgBillingRelation
  }
  OrganizationRelation -up- OrganizationProfile

  entity OrgProjectsRelation {
    links OrgProjectsRelationLinks
    meta OrgProjectsRelationMeta
  }
  OrgProjectsRelation -up- OrganizationRelation

  entity OrgProjectsRelationMeta {
    count Int
  }
  OrgProjectsRelationMeta -up- OrgProjectsRelation

  entity OrgUsersRelation {
    links OrgUsersRelationLinks
    meta OrgUsersRelationMeta
  }
  OrgUsersRelation -up- OrganizationRelation

  entity OrgUsersRelationMeta {
    count Int
  }
  OrgUsersRelationMeta -up- OrgUsersRelation

  entity OrgLaunchesRelation {
    links OrgLaunchesRelationLinks
    meta OrgLaunchesRelationMeta
  }
  OrgLaunchesRelation -up- OrganizationRelation

  entity OrgLaunchesRelationMeta {
    last_occurred_at DateTime
  }
  OrgLaunchesRelationMeta -up- OrgLaunchesRelation

  entity OrgBillingRelation {
    links OrgBillingRelationLinks
    meta OrgBillingRelationMeta
  }
  OrgBillingRelation -up- OrganizationRelation

  entity OrgBillingRelationMeta {
    plan String
    storage_usage String
  }
  OrgBillingRelationMeta -up- OrgBillingRelation

  enum OrganizationType {
    INTERNAL
    PERSONAL
    EXTERNAL
  }
  OrganizationMetadata -- OrganizationType
}

package OrganizationUserView {
  entity OrganizationUserProfile

  entity OrganizationUserInfo
  OrganizationUserInfo -up-o OrganizationUserProfile

  entity OrganizationUserDetails {
    role OrgRole
  }
  OrganizationUserDetails -up-o OrganizationUserInfo

  enum OrgRole {
    PROJECT_MANAGER
    MEMBER
  }
  OrgRole -up- OrganizationUserDetails

  entity OrganizationUserMetadata {
    assigned_at DateTime
    updated_at DateTime
    last_active_at DateTime
    related OrgUserRelation
  }
  OrganizationUserMetadata -up-o OrganizationUserInfo

  entity OrgUserRelation {
    projects OrgUserProjectsRelation
  }
  OrgUserRelation -up- OrganizationUserMetadata
  
  entity OrgUserProjectsRelation {
    links OrgUserProjectsRelationLinks
    meta OrgUserProjectsRelationMeta
  }
  OrgUserProjectsRelation -up- OrgUserRelation

  entity OrgUserProjectsRelationMeta {
    count Int
  }
  OrgUserProjectsRelationMeta -up- OrgUserProjectsRelation

  entity OrganizationUserDefinition {
    projects List<UserProjectDetails>
  }
  OrganizationUserDefinition o-- OrganizationUserDetails 
}

package UserView {
  entity UserAccountInfo
  UserAccountInfo --o OrganizationUserProfile

  entity UserDetails {
    full_name String
    type UserType
  }
  UserDetails -up-o UserAccountInfo

  entity UserContactData {
    email String
  }
  UserContactData -up-o UserDetails
  UserContactData -up-o OrganizationUserDefinition
 
  entity UserMetadata {
    id Int
    created_at DateTime
    updated_at DateTime
    last_active_at DateTime
  }
  UserMetadata -up-o UserAccountInfo

  enum UserType {
    USER
    ADMIN
  }
  UserType -up- UserDetails

  entity UserProjectDetails {
    id Int
    slug String
  }
  UserProjectDetails -- OrganizationUserDefinition
}

package ProjectView {
  entity ProjectProfile {
    related ProjectRelation
  }
  
  entity ProjectInfo
  ProjectInfo -up- ProjectProfile

  entity ProjectDetails {
    name String
    slug String
    key String
    external_id String
  }
  ProjectDetails -up-o ProjectInfo

  entity ProjectMetadata {
    id Int
    type ProjectType
    created_at DateTime
    updated_at DateTime
  }
  ProjectInfo o-- ProjectMetadata

  enum ProjectType {
    INTERNAL
    EXTERNAL
    PERSONAL
  }
  ProjectMetadata -- ProjectType
}

package ProjectUserView {
  entity ProjectUserInfo

  entity ProjectUserDetails {
    role ProjectRole
  }
  ProjectUserDetails -up-o ProjectUserInfo
  ProjectUserDetails --o UserProjectDetails

  enum ProjectRole {
    PROJECT_MANAGER
    MEMBER
  }
  ProjectRole -right- ProjectUserDetails

  entity ProjectUserMetadata {
    assigned_at DateTime
    updated_at DateTime
    last_active_at DateTime
  }
  ProjectUserMetadata -right-o ProjectUserInfo
}

@enduml