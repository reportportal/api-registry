---
stoplight-id: dp15zhxks2i84
---

@startuml organizational-entities

skinparam linetype ortho

package OrganizationView {
  
  entity OrganizationProfile {
    related OrganizationRelation
  }
  
  entity OrganizationDetails {
    name String
    slug String
  }
  OrganizationProfile *-- OrganizationDetails

  entity OrganizationMetadata {
    id Int
    type OrganizationType
    external_id String
    created_at DateTime
    updated_at DateTime
  }
  OrganizationProfile *-- OrganizationMetadata

  entity OrganizationRelation {
    projects OrgProjectsRelation
    users OrgUsersRelation
    launches OrgLaunchesRelation
    billing OrgBillingRelation
  }
  OrganizationRelation -up- OrganizationProfile

  entity OrgProjectsRelation {
    count Int
  }
  OrgProjectsRelation -up- OrganizationRelation

  entity OrgUsersRelation {
    count Int
  }
  OrgUsersRelation -up- OrganizationRelation

  entity OrgLaunchesRelation {
    last_occurred_at DateTime
  }
  OrgLaunchesRelation -up- OrganizationRelation

  entity OrgBillingRelation {
    plan_name String
    storage_usage Int
  }
  OrgBillingRelation -up- OrganizationRelation

  enum OrganizationType {
    INTERNAL
    PERSONAL
    EXTERNAL
  }
  OrganizationMetadata -- OrganizationType
}

package OrganizationUserView {
  entity OrganizationUserProfile
  entity OrganizationUserInfo
  OrganizationUserInfo -up-o OrganizationUserProfile

  entity OrganizationUserAssignment {
    projects List<UserProject>
  }

  entity OrganizationUserAccountInfo {
    role OrgRole
  }
  OrganizationUserAccountInfo -up-o OrganizationUserInfo
  OrganizationUserAccountInfo -up-o OrganizationUserAssignment

  enum OrgRole {
    PROJECT_MANAGER
    MEMBER
  }
  OrgRole -up- OrganizationUserAccountInfo

  entity OrganizationUserMetadata {
    assigned_at DateTime
    updated_at DateTime
    last_active_at DateTime
  }
  OrganizationUserMetadata -up-o OrganizationUserInfo
}

package UserView {
  entity UserProfile
  UserProfile --o OrganizationUserProfile

  entity UserAccountInfo {
    full_name String
    type UserType
  }
  UserAccountInfo -up-o UserProfile

  entity UserContactData {
    email String
  }
  UserContactData -up-o UserAccountInfo
  UserContactData -up-o OrganizationUserAssignment
 
  entity UserMetadata {
    id Int
    created_at DateTime
    updated_at DateTime
    last_active_at DateTime
  }
  UserMetadata -up-o UserProfile

  enum UserType {
    USER
    ADMIN
  }
  UserType -up- UserAccountInfo

  entity UserProjectData {
    id Int
    slug String
    key String
    role ProjectRole
  }
  UserProjectData -up-o OrganizationUserAssignment

  enum ProjectRole {
    EDITOR
    VIEWER
  }
  ProjectRole -up- UserProjectData
}

@enduml