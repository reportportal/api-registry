---
stoplight-id: dp15zhxks2i84
---

@startuml organizational-entities

' skinparam linetype ortho

package OrganizationView {
  entity OrganizationProfile {
    related OrganizationRelation
  }
  
  entity OrganizationInfo
  OrganizationInfo -up- OrganizationProfile
  
  entity OrganizationDetails {
    name String
    slug String
  }
  OrganizationInfo *-- OrganizationDetails

  entity OrganizationMetadata {
    id Int
    type OrganizationType
    external_id String
    created_at DateTime
    updated_at DateTime
  }
  OrganizationInfo *-- OrganizationMetadata

  entity OrganizationRelation {
    projects OrgProjectsRelation
    users OrgUsersRelation
    launches OrgLaunchesRelation
    billing OrgBillingRelation
  }
  OrganizationRelation -up- OrganizationProfile

  entity OrgProjectsRelation {
    count Int
  }
  OrgProjectsRelation -up- OrganizationRelation

  entity OrgUsersRelation {
    count Int
  }
  OrgUsersRelation -up- OrganizationRelation

  entity OrgLaunchesRelation {
    last_occurred_at DateTime
  }
  OrgLaunchesRelation -up- OrganizationRelation

  entity OrgBillingRelation {
    plan_name String
    storage_usage Int
  }
  OrgBillingRelation -up- OrganizationRelation

  enum OrganizationType {
    INTERNAL
    PERSONAL
    EXTERNAL
  }
  OrganizationMetadata -- OrganizationType
}

package OrganizationUserView {
  entity OrganizationUserProfile

  entity OrganizationUserInfo

  entity OrganizationUserDetails {
    role OrgRole
  }
  OrganizationUserDetails -up-o OrganizationUserInfo

  enum OrgRole {
    PROJECT_MANAGER
    MEMBER
  }
  OrgRole -up- OrganizationUserDetails

  entity OrganizationUserMetadata {
    assigned_at DateTime
    updated_at DateTime
    last_active_at DateTime
    related OrgUserRelation
  }
  OrganizationUserMetadata -up-o OrganizationUserInfo

  entity OrgUserRelation {
    projects OrgUserProjectsRelation
  }
  OrgUserRelation -up- OrganizationUserMetadata
  
  entity OrgUserProjectsRelation {
    count Int
  }
  OrgUserProjectsRelation -up- OrgUserRelation

  entity OrganizationUserAssignment {
    projects List<ProjectUserAssignment>
  }
  OrganizationUserAssignment o-up- OrganizationUserDetails 
}

package UserView {
  entity UserAccountInfo

  entity UserDetails {
    full_name String
    type UserType
  }
  UserDetails -up-o UserAccountInfo

  entity UserContactData {
    email String
  }
  UserContactData -up-o UserDetails
  UserContactData -up-o OrganizationUserAssignment
 
  entity UserMetadata {
    id Int
    created_at DateTime
    updated_at DateTime
    last_active_at DateTime
  }
  UserMetadata -up-o UserAccountInfo

  enum UserType {
    USER
    ADMIN
  }
  UserType -up- UserDetails
}

package ProjectView {
  entity ProjectProfile {
    related ProjectRelation
  }
  
  entity ProjectInfo
  ProjectInfo -up- ProjectProfile

  entity ProjectDetails {
    name String
    slug String
    key String
    external_id String
  }
  ProjectDetails --o ProjectInfo

  entity ProjectMetadata {
    id Int
    type ProjectType
    created_at DateTime
    updated_at DateTime
  }
  ProjectInfo o-- ProjectMetadata

  enum ProjectType {
    INTERNAL
    EXTERNAL
    PERSONAL
  }
  ProjectMetadata -- ProjectType

  entity ProjectRelation {
    users ProjectUsersRelation
    launches ProjectLaunchesRelation
  }
  ProjectRelation -up- ProjectProfile

  entity ProjectUsersRelation {
    count Int
  }
  ProjectUsersRelation -up- ProjectRelation

  entity ProjectLaunchesRelation {
    last_occurred_at DateTime
  }
  ProjectLaunchesRelation -up- ProjectRelation
}

package ProjectUserView {
  entity ProjectUserInfo

  entity ProjectUserDetails {
    role ProjectRole
  }
  ProjectUserDetails -up-o ProjectUserInfo

  enum ProjectRole {
    PROJECT_MANAGER
    MEMBER
  }
  ProjectRole -up- ProjectUserDetails

  entity ProjectUserMetadata {
    assigned_at DateTime
    updated_at DateTime
    last_active_at DateTime
  }
  ProjectUserMetadata -up-o ProjectUserInfo
  
  entity UserProjectAssignment {
    id Int
    slug String
    role ProjectRole
    projects List<ProjectUserDetails>
  }
  UserProjectAssignment o-up- ProjectUserDetails
  UserProjectAssignment -- OrganizationUserAssignment
}

@enduml