---
stoplight-id: dp15zhxks2i84
---

@startuml organizational-entities

frame OrganizationPresenter {
  entity Organization
  
  entity OrganizationDefinition {
    name String
    slug String
  }

  entity OrganizationMetadata {
    id Int
    type OrganizationType
    created_at DateTime
    updated_at DateTime
  }

  entity OrganizationInfo {
    projects_info OrgProjectsInfo
    Users_info OrgUsersInfo
    launches_info OrgLaunchesInfo
    billing_info OrgBillingInfo
  }

  entity OrgProjectsInfo {
    total_count Int
  }
  OrgProjectsInfo -up- OrganizationInfo

  entity OrgUsersInfo {
    total_count Int
  }
  OrgUsersInfo -up- OrganizationInfo

  entity OrgLaunchesInfo {
    last_occurred_at DateTime
  }
  OrgLaunchesInfo -up- OrganizationInfo

  entity OrgBillingInfo {
    plan_name String
    storage_usage Int
  }
  OrgBillingInfo -up- OrganizationInfo

  enum OrganizationType {
    INTERNAL
    PERSONAL
    UPSA
  }
  OrganizationMetadata -- OrganizationType

  Organization *-- OrganizationDefinition
  Organization *-- OrganizationMetadata
  Organization *-- OrganizationInfo

}

frame Users {

  entity User

  entity UserDefinition {
    email String
    role OrgRole
  }
  UserDefinition -up-* User

  entity UserMetadata {
    id Int
    created_at DateTime
    updated_at DateTime
    last_active_at DateTime
  }
  UserMetadata -up-* User

  entity UserInfo {
    full_name String
    projects_info UserProjectsInfo
  }
  UserInfo -up-* User

  enum UserType {
    USER
    ADMIN
  }
  UserType -up- UserDefinition

  enum OrgRole {
    PROJECT_MANAGER
    User
  }
  OrgRole -up- UserDefinition

  entity UserProjectsInfo {
    total_count Int
  }
  UserProjectsInfo -up-* UserInfo

  entity UserProject {
    id Int
    name String
    slug String
    key String
    role ProjectRole
  }

  enum ProjectRole {
    EDITOR
    VIEWER
  }
  ProjectRole -up- UserProject
}

frame Users {
  entity User 
}

@enduml